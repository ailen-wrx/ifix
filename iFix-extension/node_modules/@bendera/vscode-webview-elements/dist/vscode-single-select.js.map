{"version":3,"file":"vscode-single-select.js","sourceRoot":"","sources":["../src/vscode-single-select.ts"],"names":[],"mappings":"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","sourcesContent":["import {html, TemplateResult} from 'lit';\r\nimport {customElement, property, state} from 'lit/decorators.js';\r\nimport {classMap} from 'lit/directives/class-map.js';\r\nimport {chevronDownIcon} from './includes/vscode-select/template-elements';\r\nimport {VscodeSelectBase} from './includes/vscode-select/vscode-select-base';\r\n\r\n/**\r\n * ## Types\r\n *\r\n * ```typescript\r\n *interface Option {\r\n *  label: string;\r\n *  value: string;\r\n *  description: string;\r\n *  selected: boolean;\r\n *  disabled: boolean;\r\n *}\r\n * ```\r\n * @attr name - Name which is used as a variable name in the data of the form-container.\r\n */\r\n@customElement('vscode-single-select')\r\nexport class VscodeSingleSelect extends VscodeSelectBase {\r\n  @property({type: String, attribute: true, reflect: true})\r\n  role = 'listbox';\r\n\r\n  @property({type: Number})\r\n  set selectedIndex(val: number) {\r\n    this._selectedIndex = val;\r\n    this._value = this._options[this._selectedIndex]\r\n      ? this._options[this._selectedIndex].value\r\n      : '';\r\n    this._labelText = this._options[this._selectedIndex]\r\n      ? this._options[this._selectedIndex].label\r\n      : '';\r\n  }\r\n  get selectedIndex(): number {\r\n    return this._selectedIndex;\r\n  }\r\n\r\n  @property({type: String})\r\n  set value(val: string) {\r\n    if (this._options[this._selectedIndex]) {\r\n      this._options[this._selectedIndex].selected = false;\r\n    }\r\n\r\n    this._selectedIndex = this._options.findIndex((op) => op.value === val);\r\n\r\n    if (this._selectedIndex > -1) {\r\n      this._options[this._selectedIndex].selected = true;\r\n      this._labelText = this._options[this._selectedIndex].label;\r\n      this._value = val;\r\n    } else {\r\n      this._labelText = '';\r\n      this._value = '';\r\n    }\r\n  }\r\n  get value(): string {\r\n    if (this._options[this._selectedIndex]) {\r\n      return this._options[this._selectedIndex]?.value;\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  @state()\r\n  private _labelText = '';\r\n\r\n  private updateInputValue() {\r\n    if (!this.combobox) {\r\n      return;\r\n    }\r\n\r\n    const input = this.renderRoot.querySelector(\r\n      '.combobox-input'\r\n    ) as HTMLInputElement;\r\n\r\n    if (input) {\r\n      input.value = this._options[this._selectedIndex]\r\n        ? this._options[this._selectedIndex].label\r\n        : '';\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this._multiple = false;\r\n  }\r\n\r\n  protected _onSlotChange(): void {\r\n    super._onSlotChange();\r\n\r\n    if (this._selectedIndex > -1) {\r\n      this._labelText = this._options[this._selectedIndex].label;\r\n    }\r\n  }\r\n\r\n  protected _onArrowUpKeyDown(): void {\r\n    super._onArrowUpKeyDown();\r\n\r\n    if (this._showDropdown || this._selectedIndex <= 0) {\r\n      return;\r\n    }\r\n\r\n    this._filterPattern = '';\r\n    this._selectedIndex -= 1;\r\n    this._activeIndex = this._selectedIndex;\r\n    this._labelText = this._options[this._selectedIndex].label;\r\n    this._value = this._options[this._selectedIndex].value;\r\n    this._dispatchChangeEvent();\r\n  }\r\n\r\n  protected _onArrowDownKeyDown(): void {\r\n    super._onArrowDownKeyDown();\r\n\r\n    if (this._showDropdown || this._selectedIndex >= this._options.length) {\r\n      return;\r\n    }\r\n\r\n    this._filterPattern = '';\r\n    this._selectedIndex += 1;\r\n    this._activeIndex = this._selectedIndex;\r\n    this._labelText = this._options[this._selectedIndex].label;\r\n    this._value = this._options[this._selectedIndex].value;\r\n    this._dispatchChangeEvent();\r\n  }\r\n\r\n  protected _onEnterKeyDown(): void {\r\n    super._onEnterKeyDown();\r\n\r\n    if (this._selectedIndex > -1) {\r\n      this._labelText = this._options[this._selectedIndex].label;\r\n    }\r\n\r\n    this.updateInputValue();\r\n  }\r\n\r\n  private _onOptionClick(ev: MouseEvent) {\r\n    const composedPath = ev.composedPath();\r\n    const optEl = composedPath.find((et) =>\r\n      (et as HTMLElement)?.matches('li.option')\r\n    ) as HTMLElement | undefined;\r\n\r\n    if (!optEl || optEl.matches('.disabled')) {\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    this._selectedIndex = Number((optEl as HTMLElement).dataset.index);\r\n    this._value = this._options[this._selectedIndex].value;\r\n\r\n    if (this._selectedIndex > -1) {\r\n      this._labelText = this._options[this._selectedIndex].label;\r\n    }\r\n\r\n    this._toggleDropdown(false);\r\n    this._dispatchChangeEvent();\r\n  }\r\n\r\n  private _renderLabel() {\r\n    const labelContent =\r\n      this._labelText || html`<span class=\"empty-label-placeholder\"></span>`;\r\n\r\n    return html`<span class=\"text\">${labelContent}</span>`;\r\n  }\r\n\r\n  protected _renderSelectFace(): TemplateResult {\r\n    return html`\r\n      <div class=\"select-face\" @click=\"${this._onFaceClick}\">\r\n        ${this._renderLabel()} ${chevronDownIcon}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  protected _renderComboboxFace(): TemplateResult {\r\n    const inputVal =\r\n      this._selectedIndex > -1 ? this._options[this._selectedIndex].label : '';\r\n\r\n    return html`\r\n      <div class=\"combobox-face\">\r\n        <input\r\n          class=\"combobox-input\"\r\n          spellcheck=\"false\"\r\n          type=\"text\"\r\n          .value=\"${inputVal}\"\r\n          @focus=\"${this._onComboboxInputFocus}\"\r\n          @input=\"${this._onComboboxInputInput}\"\r\n        />\r\n        <button\r\n          class=\"combobox-button\"\r\n          type=\"button\"\r\n          @click=\"${this._onComboboxButtonClick}\"\r\n          @keydown=\"${this._onComboboxButtonKeyDown}\"\r\n        >\r\n          ${chevronDownIcon}\r\n        </button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  protected _renderOptions(): TemplateResult {\r\n    const list = this.combobox ? this._filteredOptions : this._options;\r\n    const options = list.map((op, index) => {\r\n      const classes = classMap({\r\n        option: true,\r\n        active: index === this._activeIndex && !op.disabled,\r\n        disabled: op.disabled,\r\n      });\r\n\r\n      return html`\r\n        <li\r\n          class=\"${classes}\"\r\n          data-index=\"${op.index}\"\r\n          data-filtered-index=\"${index}\"\r\n        >\r\n          ${op.label}\r\n        </li>\r\n      `;\r\n    });\r\n\r\n    return html`\r\n      <ul\r\n        class=\"options\"\r\n        @mouseover=\"${this._onOptionMouseOver}\"\r\n        @click=\"${this._onOptionClick}\"\r\n      >\r\n        ${options}\r\n      </ul>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'vscode-single-select': VscodeSingleSelect;\r\n  }\r\n}\r\n"]}